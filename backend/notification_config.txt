# ========================================
# BENACHRICHTIGUNGS-KONFIGURATION
# Hermann BÃ¶hmer Online-Shop
# ========================================
#
# Diese Datei erklÃ¤rt alle Benachrichtigungs-Einstellungen
# in der .env Datei (/app/backend/.env)
#
# ========================================

## TELEGRAM EINRICHTEN (Schritt fÃ¼r Schritt)

### 1. Bot erstellen
   1. Ã–ffne Telegram und suche nach @BotFather
   2. Sende /newbot
   3. WÃ¤hle einen Namen (z.B. "Hermann BÃ¶hmer Shop")
   4. WÃ¤hle einen Username (z.B. "HermannBoehmerBot")
   5. Kopiere den TOKEN (sieht aus wie: 123456789:ABCdefGHI...)

### 2. Channel/Gruppe erstellen
   1. Erstelle einen neuen Channel oder Gruppe
   2. Gehe zu Einstellungen â†’ Administratoren
   3. FÃ¼ge deinen Bot als Administrator hinzu
   4. Aktiviere "Nachrichten posten"

### 3. Channel ID finden
   1. Sende eine Nachricht in den Channel
   2. Ã–ffne im Browser: https://api.telegram.org/bot<DEIN_TOKEN>/getUpdates
   3. Suche nach "chat":{"id":-100... 
   4. Die Zahl (inkl. -100) ist deine Channel ID

### 4. In .env eintragen
   TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   TELEGRAM_CHANNEL_ID=-1001234567890

## E-MAIL EMPFÃ„NGER

NOTIFICATION_RECIPIENTS
- Komma-getrennte Liste von E-Mail-Adressen
- Diese erhalten alle Admin-Benachrichtigungen
- Beispiel: admin@domain.com,chef@domain.com,info@domain.com

ADMIN_EMAIL / ADMIN_EMAIL_PASSWORD
- Der E-Mail-Account, VON dem gesendet wird
- Muss ein gÃ¼ltiger E-Mail-Account sein (z.B. admin@hermann-boehmer.com)

## BENACHRICHTIGUNGS-SCHALTER

Alle Schalter kÃ¶nnen auf "true" (aktiviert) oder "false" (deaktiviert) gesetzt werden.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Variable                â”‚ Beschreibung                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_NEW_ORDER        â”‚ ğŸ›’ Bei jeder neuen bezahlten Bestellung                 â”‚
â”‚                         â”‚ â†’ EnthÃ¤lt: Kunde, Produkte, Summe, Lieferadresse        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_LOW_STOCK        â”‚ âš ï¸ Wenn ein Produkt unter 10 StÃ¼ck fÃ¤llt               â”‚
â”‚                         â”‚ â†’ Wird nach jeder Bestellung automatisch geprÃ¼ft        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_OUT_OF_STOCK     â”‚ ğŸš¨ Wenn ein Produkt komplett ausverkauft ist (0 StÃ¼ck)  â”‚
â”‚                         â”‚ â†’ Dringender als LOW_STOCK, separate Benachrichtigung   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_CONTACT_FORM     â”‚ ğŸ“§ Bei neuer Kontaktanfrage Ã¼ber das Kontaktformular    â”‚
â”‚                         â”‚ â†’ EnthÃ¤lt: Name, E-Mail, Nachricht                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_NEW_CUSTOMER     â”‚ ğŸ‘¤ Bei Neuregistrierung eines Kunden                    â”‚
â”‚                         â”‚ â†’ EnthÃ¤lt: Name, E-Mail                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_NEWSLETTER_SIGNUPâ”‚ ğŸ“° Bei Newsletter-Anmeldung                             â”‚
â”‚                         â”‚ â†’ EnthÃ¤lt: E-Mail-Adresse, Quelle                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_COUPON_USED      â”‚ ğŸ Wenn ein Gutscheincode eingelÃ¶st wird                â”‚
â”‚                         â”‚ â†’ EnthÃ¤lt: Code, Rabatt, Kunde, Bestellsumme            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NOTIFY_DAILY_SUMMARY    â”‚ ğŸ“Š TÃ¤gliche Zusammenfassung (geplant fÃ¼r 20:00)         â”‚
â”‚                         â”‚ â†’ EnthÃ¤lt: Bestellungen, Umsatz, Neukunden des Tages    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## BEISPIEL .ENV KONFIGURATION

```
# ==================== TELEGRAM ====================
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHANNEL_ID=-1001234567890

# ==================== E-MAIL EMPFÃ„NGER ====================
NOTIFICATION_RECIPIENTS=admin@hermann-boehmer.com,chef@firma.de
ADMIN_EMAIL=admin@hermann-boehmer.com
ADMIN_EMAIL_PASSWORD=DeinSicheresPasswort

# ==================== SCHALTER ====================
NOTIFY_NEW_ORDER=true
NOTIFY_LOW_STOCK=true
NOTIFY_CONTACT_FORM=true
NOTIFY_NEW_CUSTOMER=true
NOTIFY_NEWSLETTER_SIGNUP=true
NOTIFY_OUT_OF_STOCK=true
NOTIFY_COUPON_USED=true
NOTIFY_DAILY_SUMMARY=true
```

## HINWEISE

- Telegram UND E-Mail werden IMMER zusammen gesendet
- Wenn eines fehlschlÃ¤gt (z.B. Telegram nicht konfiguriert), 
  wird das andere trotzdem gesendet
- Nach Ã„nderungen an der .env muss der Server neu gestartet werden:
  sudo supervisorctl restart backend
- Logs bei Problemen:
  tail -f /var/log/supervisor/backend.err.log

## TROUBLESHOOTING

### Telegram funktioniert nicht:
1. PrÃ¼fe ob TELEGRAM_BOT_TOKEN korrekt ist
2. PrÃ¼fe ob TELEGRAM_CHANNEL_ID mit -100 beginnt
3. PrÃ¼fe ob der Bot Admin-Rechte im Channel hat
4. Teste manuell: curl https://api.telegram.org/bot<TOKEN>/getMe

### E-Mail funktioniert nicht:
1. PrÃ¼fe SMTP-Einstellungen (Host, Port, TLS)
2. PrÃ¼fe ob NOTIFICATION_RECIPIENTS korrekt sind
3. PrÃ¼fe ob ADMIN_EMAIL und Passwort stimmen
4. Bei Gmail/Outlook: "Weniger sichere Apps" aktivieren oder App-Passwort nutzen

### Keine Benachrichtigungen:
1. PrÃ¼fe ob die entsprechende NOTIFY_* Variable auf "true" steht
2. PrÃ¼fe die Logs: tail -f /var/log/supervisor/backend.err.log
3. Server neu gestartet nach .env Ã„nderung?
